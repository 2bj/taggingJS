/*! taggingJS - v1.0.0 - 2014-04-06 */!function(a,b,c,d){a.fn.tagging=function(e){var f,g,h,i,j,k,l;return h=a(this),i=[],g={"case-sensitive":!1,"close-char":"&times;","close-class":"tag-i","edit-on-delete":!0,"forbidden-chars":[",",".","_","?"],"forbidden-chars-callback":b.alert,"forbidden-chars-text":"Forbidden character:","forbidden-words":[],"forbidden-words-callback":b.alert,"forbidden-words-text":"Forbidden word:","no-backspace":!1,"no-comma":!1,"no-del":!1,"no-duplicate":!0,"no-duplicate-callback":b.alert,"no-duplicate-text":"Duplicate tag:","no-enter":!1,"no-spacebar":!0,"pre-tags-separator":"\n","tag-box-class":"tagging","tag-char":"#","tag-class":"tag","tags-input-name":"tag","type-zone-class":"type-zone"},f=a.extend(g,e),j=function(a){var b,c,e;e={};for(b in g)c=a.data(b),c!==d&&(e[b]=c);return e},l=function(a,b,c){return a.apply(this,[b+" '"+c+"'."]),!0},k=function(b,d,e){var g,h,j,k,m,n,o,p;if(e=e||f,m=e["forbidden-words"],d||(d=b.val(),b.val("")),!d||!d.length)return!0;if(e["case-sensitive"]===!1&&(d=d.toLowerCase()),h=m.length,0!==h)for(g=0;h>g;g+=1)if(k=d.indexOf(m[g]),-1!==k)return b.val(""),n=e["forbidden-words-callback"],o=e["forbidden-words-text"],l(n,o,d);if(e["no-duplicate"]===!0&&(h=i.length,0!==h))for(g=0;h>g;g+=1)if(j=i[g].pure_text,j===d)return b.val(""),n=e["no-duplicate-callback"],o=e["no-duplicate-text"],l(n,o,d);return p=a(c.createElement("div")).addClass("tag").html("<span>#</span> "+d),a(c.createElement("input")).attr("type","hidden").attr("name",e["tags-input-name"]+"[]").val(d).appendTo(p),a(c.createElement("a")).attr("role","button").addClass(e["close-class"]).html(e["close-char"]).click(function(){p.remove()}).appendTo(p),p.pure_text=d,i.push(p),b.before(p),!1},h.each(function(){var b,e,g,h;h=a(this),g=a.extend(f,j(h)),b=h.text(),h.empty(),e=a(c.createElement("input")).addClass(g["type-zone-class"]).attr("contenteditable",!0),h.addClass(g["tag-box-class"]).append(e),e.on("keydown",function(a){var b,c,f,h,j,m,n,o,p,q,r,s;if(o=g["forbidden-chars"],p=e.val(),q=a.which,m={comma:188,enter:13,spacebar:32},n={del:46,backspace:8},""===p){for(c in n)if(q===n[c])return g["no-"+c]||(a.preventDefault(),b=i.pop(),b!==d&&(b.remove(),g["edit-on-delete"]&&e.focus().val("").val(b.pure_text))),!1}else{if(j=o.length,0!==j)for(h=0;j>h;h+=1)if(f=p.indexOf(o[h]),-1!==f)return a.preventDefault(),p=p.replace(o[h],""),e.focus().val("").val(p),r=g["forbidden-chars-callback"],s=g["forbidden-chars-text"],l(r,s,o[h]);for(c in m)if(q===m[c])return g["no-"+c]||(a.preventDefault(),k(e,null,g)),!1}}),h.on("click",function(){e.focus()}),e.on("focus",function(){this.selectionStart=this.selectionEnd=a(this).val().length}),a.each(b.split(g["pre-tags-separator"]),function(){k(e,this,g)})}),this}}(window.jQuery,window,document);