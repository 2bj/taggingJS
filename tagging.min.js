/*! taggingJS - v1.0.0 - 2014-03-27 */!function(a,b,c,d){a.fn.tagging=function(e){var f,g,h,i,j=a(this),k=[];return g={"no-duplicate":!0,"pre-tags-separator":"\n","no-duplicate-callback":b.alert,"no-duplicate-text":"Duplicate tags","type-zone-class":"type-zone","tag-box-class":"tagging","tag-char":"#","tag-class":"tag","close-char":"&times;","close-class":"tag-i","tags-input-name":"tag","no-del":!1,"no-backspace":!1,"no-comma":!1,"no-enter":!1,"no-spacebar":!0,"edit-on-delete":!0,"forbidden-chars":[",",".","_","?"]},f=a.extend(g,e),h=function(a){var b,c,e={};for(b in g)c=a.data(b),c!==d&&(e[b]=c);return e},i=function(b,d,e){var g,h,i,j;if(e=e||f,d||(d=b.val(),b.val("")),!d||!d.length)return!1;if(e["no-duplicate"]===!0)for(h=k.length,g=0;h>g;g+=1)if(i=k[g].pure_text,i===d)return e["no-duplicate-callback"].apply(this,[e["no-duplicate-text"]+" "+i+"."]),b.val(""),!1;return j=a(c.createElement("div")).addClass("tag").html("<span>#</span> "+d),a(c.createElement("input")).attr("type","hidden").attr("name",e["tags-input-name"]+"[]").val(d).appendTo(j),a(c.createElement("a")).attr("role","button").addClass(e["close-class"]).html(e["close-char"]).click(function(){j.remove()}).appendTo(j),j.pure_text=d,k.push(j),b.before(j),!0},j.each(function(){var b,e,g,j=a(this);return g=a.extend(f,h(j)),j.length?(b=j.text(),j.empty(),e=a(c.createElement("input")).addClass(g["type-zone-class"]).attr("contenteditable",!0),j.addClass(g["tag-box-class"]).append(e),e.on("keydown",function(a){var b,c,f,h,j,l,m,n=g["forbidden-chars"],o=e.val(),p=a.which;if(l={comma:188,enter:13,spacebar:32},m={del:46,backspace:8},""===o){for(c in m)if(p===m[c])return g["no-"+c]||(a.preventDefault(),b=k.pop(),b!==d&&(b.remove(),g["edit-on-delete"]&&e.focus().val("").val(b.pure_text))),!1}else{for(j=n.length,h=0;j>h;h+=1)if(f=o.indexOf(n[h]),-1!==f){a.preventDefault(),o=o.replace(n[h],""),e.focus().val("").val(o);break}for(c in l)if(p===l[c])return g["no-"+c]||(a.preventDefault(),i(e,null,g)),!1}}).blur(i,e,null,g),j.on("click",function(){e.focus()}),e.on("focus",function(){this.selectionStart=this.selectionEnd=a(this).val().length}),void a.each(b.split(g["pre-tags-separator"]),function(){i(e,this,g)})):(console.error("%s not found",g),!1)}),this}}(window.jQuery,window,document);